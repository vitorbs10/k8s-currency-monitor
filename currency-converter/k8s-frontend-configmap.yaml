apiVersion: v1
kind: ConfigMap
metadata:
  name: currency-frontend
  labels:
    app: currency-converter
data:
  index.html: |
    <!DOCTYPE html>
    <html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Conversor de Moedas - Real Time</title>
        <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;800&display=swap" rel="stylesheet">
        <style>
            :root {
                --bg-primary: #0a0e1a;
                --bg-secondary: #131824;
                --bg-card: #1a2133;
                --accent-green: #00ff88;
                --accent-cyan: #00d4ff;
                --accent-purple: #a855f7;
                --text-primary: #e2e8f0;
                --text-secondary: #94a3b8;
                --border: #2d3748;
            }
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            body {
                font-family: 'Space Mono', monospace;
                background: var(--bg-primary);
                color: var(--text-primary);
                min-height: 100vh;
                background-image: 
                    radial-gradient(circle at 20% 50%, rgba(168, 85, 247, 0.15) 0%, transparent 50%),
                    radial-gradient(circle at 80% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%);
                overflow-x: hidden;
            }
            .container {
                max-width: 1400px;
                margin: 0 auto;
                padding: 2rem;
            }
            header {
                text-align: center;
                margin-bottom: 3rem;
                animation: slideDown 0.8s ease-out;
            }
            @keyframes slideDown {
                from { opacity: 0; transform: translateY(-30px); }
                to { opacity: 1; transform: translateY(0); }
            }
            h1 {
                font-family: 'Syne', sans-serif;
                font-size: 3.5rem;
                font-weight: 800;
                background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                margin-bottom: 0.5rem;
                letter-spacing: -0.02em;
            }
            .subtitle {
                color: var(--text-secondary);
                font-size: 1rem;
                letter-spacing: 0.1em;
                text-transform: uppercase;
            }
            .live-indicator {
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                margin-top: 1rem;
                padding: 0.5rem 1rem;
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: 2rem;
                font-size: 0.875rem;
            }
            .live-dot {
                width: 8px;
                height: 8px;
                background: var(--accent-green);
                border-radius: 50%;
                animation: pulse 2s ease-in-out infinite;
            }
            @keyframes pulse {
                0%, 100% { opacity: 1; transform: scale(1); }
                50% { opacity: 0.5; transform: scale(0.9); }
            }
            .converter-section {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: 1.5rem;
                padding: 2rem;
                margin-bottom: 2rem;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                animation: fadeIn 0.8s ease-out 0.2s both;
            }
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .converter-grid {
                display: grid;
                grid-template-columns: 1fr auto 1fr;
                gap: 2rem;
                align-items: center;
                margin-top: 1.5rem;
            }
            .input-group {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }
            label {
                font-size: 0.875rem;
                color: var(--text-secondary);
                text-transform: uppercase;
                letter-spacing: 0.05em;
            }
            select, input {
                background: var(--bg-secondary);
                border: 2px solid var(--border);
                color: var(--text-primary);
                padding: 1rem;
                border-radius: 0.75rem;
                font-family: 'Space Mono', monospace;
                font-size: 1rem;
                transition: all 0.3s ease;
            }
            select:focus, input:focus {
                outline: none;
                border-color: var(--accent-cyan);
                box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
            }
            input[type="number"] {
                font-size: 1.5rem;
                font-weight: 700;
            }
            .swap-btn {
                background: var(--accent-purple);
                border: none;
                color: white;
                width: 48px;
                height: 48px;
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
                font-size: 1.5rem;
            }
            .swap-btn:hover {
                transform: rotate(180deg) scale(1.1);
                box-shadow: 0 0 20px rgba(168, 85, 247, 0.4);
            }
            .result {
                margin-top: 1.5rem;
                padding: 1.5rem;
                background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(0, 212, 255, 0.1));
                border: 1px solid var(--accent-cyan);
                border-radius: 0.75rem;
                font-size: 2rem;
                font-weight: 700;
                text-align: center;
                color: var(--accent-green);
            }
            .rates-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 1.5rem;
                margin-bottom: 2rem;
            }
            .rate-card {
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: 1rem;
                padding: 1.5rem;
                transition: all 0.3s ease;
                animation: fadeIn 0.6s ease-out both;
                position: relative;
                overflow: hidden;
            }
            .rate-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 3px;
                background: linear-gradient(90deg, var(--accent-green), var(--accent-cyan));
                transform: scaleX(0);
                transform-origin: left;
                transition: transform 0.3s ease;
            }
            .rate-card:hover {
                transform: translateY(-5px);
                border-color: var(--accent-cyan);
                box-shadow: 0 10px 40px rgba(0, 212, 255, 0.2);
            }
            .rate-card:hover::before {
                transform: scaleX(1);
            }
            .rate-card:nth-child(1) { animation-delay: 0.1s; }
            .rate-card:nth-child(2) { animation-delay: 0.15s; }
            .rate-card:nth-child(3) { animation-delay: 0.2s; }
            .rate-card:nth-child(4) { animation-delay: 0.25s; }
            .rate-card:nth-child(5) { animation-delay: 0.3s; }
            .rate-card:nth-child(6) { animation-delay: 0.35s; }
            .rate-card:nth-child(7) { animation-delay: 0.4s; }
            .currency-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }
            .currency-code {
                font-family: 'Syne', sans-serif;
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--accent-cyan);
            }
            .currency-flag {
                font-size: 2rem;
            }
            .rate-value {
                font-size: 2rem;
                font-weight: 700;
                color: var(--text-primary);
                margin-bottom: 0.25rem;
            }
            .rate-label {
                font-size: 0.75rem;
                color: var(--text-secondary);
                text-transform: uppercase;
                letter-spacing: 0.05em;
            }
            .section-title {
                font-family: 'Syne', sans-serif;
                font-size: 1.5rem;
                font-weight: 700;
                margin-bottom: 1.5rem;
                color: var(--text-primary);
            }
            .loading {
                text-align: center;
                padding: 4rem;
                color: var(--text-secondary);
            }
            .spinner {
                border: 3px solid var(--border);
                border-top: 3px solid var(--accent-cyan);
                border-radius: 50%;
                width: 40px;
                height: 40px;
                animation: spin 1s linear infinite;
                margin: 0 auto 1rem;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            .error {
                background: rgba(239, 68, 68, 0.1);
                border: 1px solid #ef4444;
                border-radius: 0.75rem;
                padding: 1rem;
                margin: 1rem 0;
                color: #fca5a5;
            }
            @media (max-width: 768px) {
                h1 { font-size: 2.5rem; }
                .converter-grid {
                    grid-template-columns: 1fr;
                    gap: 1rem;
                }
                .swap-btn {
                    transform: rotate(90deg);
                    margin: 0 auto;
                }
                .rates-grid {
                    grid-template-columns: 1fr;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <header>
                <h1>üí± Conversor Real</h1>
                <p class="subtitle">Taxas em Tempo Real</p>
                <div class="live-indicator">
                    <span class="live-dot"></span>
                    <span id="updateTime">Carregando...</span>
                </div>
            </header>
            <div class="converter-section">
                <h2 class="section-title">Conversor de Moedas</h2>
                <div class="converter-grid">
                    <div class="input-group">
                        <label for="fromCurrency">De</label>
                        <select id="fromCurrency">
                            <option value="USD">üá∫üá∏ D√≥lar Americano (USD)</option>
                            <option value="EUR">üá™üá∫ Euro (EUR)</option>
                            <option value="GBP">üá¨üáß Libra Esterlina (GBP)</option>
                            <option value="CAD">üá®üá¶ D√≥lar Canadense (CAD)</option>
                            <option value="CHF">üá®üá≠ Franco Su√≠√ßo (CHF)</option>
                            <option value="JPY">üáØüáµ Iene Japon√™s (JPY)</option>
                            <option value="CNY">üá®üá≥ Yuan Chin√™s (CNY)</option>
                        </select>
                        <input type="number" id="amount" value="100" min="0" step="0.01">
                    </div>
                    <button class="swap-btn" onclick="swapCurrencies()">‚áÑ</button>
                    <div class="input-group">
                        <label for="toCurrency">Para</label>
                        <select id="toCurrency">
                            <option value="BRL">üáßüá∑ Real Brasileiro (BRL)</option>
                        </select>
                        <input type="number" id="resultAmount" readonly>
                    </div>
                </div>
                <div id="conversionResult" class="result" style="display: none;"></div>
            </div>
            <h2 class="section-title">Cota√ß√µes Atuais (BRL)</h2>
            <div id="ratesContainer" class="rates-grid">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Carregando taxas...</p>
                </div>
            </div>
        </div>
        <script>
            const API_URL = window.location.origin;
            let currentRates = {};
            const currencyNames = {
                'USD': { name: 'D√≥lar Americano', flag: 'üá∫üá∏' },
                'EUR': { name: 'Euro', flag: 'üá™üá∫' },
                'GBP': { name: 'Libra Esterlina', flag: 'üá¨üáß' },
                'CAD': { name: 'D√≥lar Canadense', flag: 'üá®üá¶' },
                'CHF': { name: 'Franco Su√≠√ßo', flag: 'üá®üá≠' },
                'JPY': { name: 'Iene Japon√™s', flag: 'üáØüáµ' },
                'CNY': { name: 'Yuan Chin√™s', flag: 'üá®üá≥' }
            };
            async function fetchRates() {
                try {
                    const response = await fetch(`${API_URL}/rates`);
                    const data = await response.json();
                    currentRates = data.rates;
                    displayRates(data);
                    updateTime(data.last_update);
                    return data;
                } catch (error) {
                    console.error('Erro ao buscar taxas:', error);
                    document.getElementById('ratesContainer').innerHTML = '<div class="error">‚ùå Erro ao carregar taxas.</div>';
                }
            }
            function displayRates(data) {
                const container = document.getElementById('ratesContainer');
                container.innerHTML = '';
                Object.entries(data.rates).forEach(([currency, rate]) => {
                    const info = currencyNames[currency];
                    const card = document.createElement('div');
                    card.className = 'rate-card';
                    card.innerHTML = `
                        <div class="currency-header">
                            <span class="currency-code">${currency}</span>
                            <span class="currency-flag">${info.flag}</span>
                        </div>
                        <div class="rate-value">R$ ${rate.toFixed(4)}</div>
                        <div class="rate-label">${info.name}</div>
                    `;
                    container.appendChild(card);
                });
            }
            function updateTime(timestamp) {
                if (!timestamp) return;
                const date = new Date(timestamp);
                const timeStr = date.toLocaleTimeString('pt-BR');
                document.getElementById('updateTime').textContent = `Atualizado √†s ${timeStr}`;
            }
            function convert() {
                const from = document.getElementById('fromCurrency').value;
                const amount = parseFloat(document.getElementById('amount').value);
                if (isNaN(amount) || amount <= 0) {
                    document.getElementById('resultAmount').value = '';
                    document.getElementById('conversionResult').style.display = 'none';
                    return;
                }
                const rate = currentRates[from];
                if (rate) {
                    const result = amount * rate;
                    document.getElementById('resultAmount').value = result.toFixed(2);
                    const resultDiv = document.getElementById('conversionResult');
                    resultDiv.innerHTML = `${amount.toFixed(2)} ${from} = <br><span style="font-size: 2.5rem">R$ ${result.toFixed(2)}</span>`;
                    resultDiv.style.display = 'block';
                }
            }
            function swapCurrencies() {
                const amount = parseFloat(document.getElementById('resultAmount').value);
                if (!isNaN(amount) && amount > 0) {
                    const from = document.getElementById('fromCurrency').value;
                    const rate = currentRates[from];
                    if (rate) {
                        const originalAmount = amount / rate;
                        document.getElementById('amount').value = originalAmount.toFixed(2);
                        convert();
                    }
                }
            }
            document.getElementById('fromCurrency').addEventListener('change', convert);
            document.getElementById('amount').addEventListener('input', convert);
            fetchRates().then(() => convert());
            setInterval(fetchRates, 5 * 60 * 1000);
        </script>
    </body>
    </html>

